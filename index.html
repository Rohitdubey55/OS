<!doctype html>

<html lang="en">

<head>

    <meta charset="utf-8" />

    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" />

    <title>PersonalOS</title>

    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#4F46E5" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="apple-mobile-web-app-title" content="PersonalOS" />

    <link rel="manifest" href="manifest.json" />
    <link rel="icon" type="image/svg+xml" href="favicon.svg" />
    <link rel="apple-touch-icon" href="favicon.svg" />

    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Outlined" rel="stylesheet">

    <!-- SaaS Icon Packs -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/remixicon@4.2.0/fonts/remixicon.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@tabler/icons-webfont@latest/tabler-icons.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/feather-icons@4.29.1/dist/feather.min.css" />

    <link rel="stylesheet" href="styles/design-system.css" />

    <link rel="stylesheet" href="styles/components.css" />

    <link rel="stylesheet" href="loader.css" />

    <link rel="stylesheet" href="style.css" />

    <link rel="stylesheet" href="settings-styles.css" />

    <link rel="stylesheet" href="settings-data-styles.css" />

    <link rel="stylesheet" href="settings-fab.css" />

    <link rel="stylesheet" href="fab-menu-styles.css" />

    <link rel="stylesheet" href="diary-views.css" />

    <link rel="stylesheet" href="tools-views.css" />

    <link rel="stylesheet" href="finance-transactions.css" />

    <link rel="stylesheet" href="ui-polish.css" />

    <link rel="stylesheet" href="vision-views.css" />

    <link rel="stylesheet" href="saas-polish.css" />
    <link rel="stylesheet" href="command-palette.css" />
    <link rel="stylesheet" href="styles/icon-styles.css" />

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sortablejs@latest/Sortable.min.js"></script>

    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://cdn.jsdelivr.net/npm/feather-icons@4.29.1/dist/feather.min.js"></script>

    <script src="components/empty-state.js"></script>
    <script src="components/icon-packs.js"></script>

    <script src="fab-menu.js"></script>

    <script src="ai-service.js"></script>

</head>

<body>

    <!-- Loading Screen -->
    <div id="appLoader" class="app-loader">
        <div class="loader-content">
            <div class="loader-logo">
                <span class="logo-icon"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32"
                        viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round" class="lucide lucide-target">
                        <circle cx="12" cy="12" r="10" />
                        <circle cx="12" cy="12" r="6" />
                        <circle cx="12" cy="12" r="2" />
                    </svg></span>
                PersonalOS
            </div>

            <div class="loader-progress-container">
                <div class="loader-progress-bar"></div>
            </div>

            <div class="loader-status">Loading your data...</div>
        </div>
    </div>



    <div class="app">


        <aside class="sidebar">

            <div class="brand">

                <div style="width:24px;height:24px;background:var(--primary);border-radius:6px;"></div>

                PersonalOS

            </div>

            <nav>

                <div class="nav-item active" onclick="routeTo('dashboard')" data-target="dashboard">Dashboard</div>

                <div class="nav-item" onclick="routeTo('calendar')" data-target="calendar">Planner</div>

                <div class="nav-item" onclick="routeTo('tasks')" data-target="tasks">Tasks</div>

                <div class="nav-item" onclick="routeTo('finance')" data-target="finance">Finance</div>

                <div class="nav-item" onclick="routeTo('habits')" data-target="habits">Habits</div>

                <div class="nav-item" onclick="routeTo('diary')" data-target="diary">Diary</div>

                <div class="nav-item" onclick="routeTo('vision')" data-target="vision">
                    Vision
                </div>

                <div class="nav-item" onclick="routeTo('people')" data-target="people">People</div>

            </nav>

        </aside>



        <main class="main-content">


            <div class="main-header-bar">

                <button class="menu-toggle-btn" onclick="toggleSidebar()" title="Toggle Menu">

                    <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2"
                        stroke-linecap="round" stroke-linejoin="round">

                        <line x1="3" y1="12" x2="21" y2="12"></line>

                        <line x1="3" y1="6" x2="21" y2="6"></line>

                        <line x1="3" y1="18" x2="21" y2="18"></line>

                    </svg>

                </button>



            </div>

            <div id="main"></div>


        </main>

        <nav class="mobile-nav">

            <div class="mob-item active" onclick="routeTo('dashboard')" data-target="dashboard">
                <i data-icon="home"></i>
                Home
            </div>

            <div class="mob-item" onclick="routeTo('calendar')" data-target="calendar">
                <i data-icon="calendar"></i>
                Plan
            </div>

            <div class="mob-item" onclick="routeTo('tasks')" data-target="tasks">
                <i data-icon="list"></i>
                Tasks
            </div>

            <div class="mob-item" onclick="routeTo('finance')" data-target="finance">
                <i data-icon="money"></i>
                Money
            </div>

            <div class="mob-item" onclick="routeTo('habits')" data-target="habits">
                <i data-icon="habits"></i>
                Habits
            </div>

            <div class="mob-item" onclick="routeTo('diary')" data-target="diary">
                <i data-icon="diary"></i>
                Diary
            </div>

            <div class="mob-item" onclick="routeTo('vision')" data-target="vision">
                <i data-icon="vision"></i>
                Vision
            </div>

            <div class="mob-item" onclick="routeTo('people')" data-target="people">
                <i data-icon="people"></i>
                People
            </div>

        </nav>



        <div id="toast"
            style="position:fixed; bottom:90px; left:50%; transform:translateX(-50%); background:var(--text-1); color:var(--surface-base); padding:10px 20px; border-radius:30px; opacity:0; pointer-events:none; transition:opacity 0.3s; font-size:14px; z-index:200">
            Action Saved</div>


        <!-- FAB Menu Overlay -->
        <div id="fabOverlay" class="fab-overlay" onclick="closeFABMenu()"></div>

        <!-- FAB Speed Dial Menu -->
        <div id="fabMenu" class="fab-menu">

            <!-- Stage 1: Main Actions -->
            <div id="fabStage1" class="fab-stage">
                <div class="fab-menu-item" onclick="routeTo('settings'); closeFABMenu()">
                    <span class="fab-menu-label">Settings</span>
                    <button class="fab-menu-button settings"><i data-icon="settings"
                            style="width:20px;height:20px;"></i></button>
                </div>
                <div class="fab-menu-item" onclick="refreshAll(); closeFABMenu()">
                    <span class="fab-menu-label">Refresh</span>
                    <button class="fab-menu-button refresh"><i data-icon="refresh"
                            style="width:20px;height:20px;"></i></button>
                </div>
                <div class="fab-menu-item" onclick="showFabToolsStage()">
                    <span class="fab-menu-label">Tools</span>
                    <button class="fab-menu-button tools"><i data-icon="wrench"
                            style="width:20px;height:20px;"></i></button>
                </div>
                <div class="fab-menu-item" onclick="showFabStage2()">
                    <span class="fab-menu-label">Add New</span>
                    <button class="fab-menu-button add"><i data-icon="add" style="width:20px;height:20px;"></i></button>
                </div>
            </div>

            <!-- Stage 2: Create Items (Initially Hidden) -->
            <div id="fabStage2" class="fab-stage hidden">
                <div class="fab-menu-item" onclick="window.openEventModal(); closeFABMenu()">
                    <span class="fab-menu-label">Add Event</span>
                    <button class="fab-menu-button plan">
                        <i data-icon="calendar" style="color:var(--primary)"></i>
                    </button>
                </div>
                <div class="fab-menu-item" onclick="window.openTaskModal(); closeFABMenu()">
                    <span class="fab-menu-label">Add Task</span>
                    <button class="fab-menu-button task">
                        <i data-icon="check-circle" style="color:var(--success)"></i>
                    </button>
                </div>
                <div class="fab-menu-item" onclick="window.openFinanceAction(); closeFABMenu()">
                    <span class="fab-menu-label">Add Transaction</span>
                    <button class="fab-menu-button money">
                        <i data-icon="wallet" style="color:var(--warning)"></i>
                    </button>
                </div>
                <div class="fab-menu-item" onclick="window.openHabitModal(); closeFABMenu()">
                    <span class="fab-menu-label">Add Habit</span>
                    <button class="fab-menu-button habit">
                        <i data-icon="habits" style="color:var(--danger)"></i>
                    </button>
                </div>
                <div class="fab-menu-item" onclick="window.openDiaryModal(); closeFABMenu()">
                    <span class="fab-menu-label">Add Diary</span>
                    <button class="fab-menu-button diary">
                        <i data-icon="diary" style="color:var(--accent)"></i>
                    </button>
                </div>
                <div class="fab-menu-item" onclick="window.openVisionModal(); closeFABMenu()">
                    <span class="fab-menu-label">Add Vision</span>
                    <button class="fab-menu-button vision">
                        <i data-icon="vision" style="color:#ec4899"></i>
                    </button>
                </div>
                <!-- Back Button -->
                <div class="fab-menu-item" onclick="showFabStage1()">
                    <span class="fab-menu-label">Back</span>
                    <button class="fab-menu-button back">
                        <i data-icon="back" style="color:var(--text-1)"></i>
                    </button>
                </div>
            </div>

            <!-- Stage 3: Tools Sub-Menu (Initially Hidden) -->
            <div id="fabStage3" class="fab-stage hidden">
                <div class="fab-menu-item" onclick="routeTo('gym'); closeFABMenu()">
                    <span class="fab-menu-label">Gym Page</span>
                    <button class="fab-menu-button gym">
                        <i data-icon="dumbbell" style="color:var(--primary)"></i>
                    </button>
                </div>
                <div class="fab-menu-item" onclick="routeTo('notes'); closeFABMenu()">
                    <span class="fab-menu-label">Note Taking</span>
                    <button class="fab-menu-button notes">
                        <i data-icon="notebook" style="color:var(--success)"></i>
                    </button>
                </div>
                <!-- Back Button -->
                <div class="fab-menu-item" onclick="showFabStage1()">
                    <span class="fab-menu-label">Back</span>
                    <button class="fab-menu-button back">
                        <i data-icon="back" style="color:var(--text-1)"></i>
                    </button>
                </div>
            </div>

        </div>

        <!-- Main FAB Button -->
        <div class="fab" onclick="toggleFABMenu()"><i data-icon="grid"
                style="width:28px;height:28px;stroke-width:3;"></i></div>



        <div id="universalModal" class="modal-overlay hidden"
            onclick="if(event.target === this) this.classList.add('hidden')">

            <div class="modal-box">
                <!-- Content injected dynamically -->
            </div>

        </div>



    </div>



    <!-- Floating AI Button -->
    <div class="ai-fab" onclick="openAIModal()">
        <i data-icon="sparkles"></i>
    </div>

    <!-- Floating Search Button (Mobile) -->
    <div class="mobile-search-fab" onclick="toggleCommandPalette()">
        <i data-icon="search"></i>
    </div>

    <!-- AI Insight Modal -->
    <div id="aiModal" class="ai-modal-overlay" onclick="if(event.target === this) closeAIModal()">
        <div class="ai-modal-card">
            <div class="ai-header">
                <div class="ai-title">
                    <i data-icon="sparkles" style="width:24px; margin-right:8px; display:inline-block"></i>
                    AI Insight
                </div>
                <button class="btn icon" onclick="closeAIModal()"><i data-icon="x"></i></button>
            </div>

            <div id="aiModalContent">
                <!-- Content injected via JS -->
                <div style="text-align:center; padding:40px; color:var(--text-muted)">
                    <i data-icon="loading" class="spin" style="width:32px; height:32px; margin-bottom:16px"></i>
                    <div>Analyzing your data...</div>
                </div>
            </div>
        </div>
    </div>

    <script src="main.js?v=20260220b"></script>

    <script src="view-dashboard.js"></script>

    <script src="view-calendar.js"></script>

    <script src="view-tasks.js?v=2"></script>

    <script src="view-finance.js"></script>

    <script src="view-habits.js?v=3"></script>

    <script src="view-diary.js"></script>

    <script src="view-vision.js"></script>

    <script src="view-people.js"></script>


    <script src="view-settings.js"></script>
    <script src="view-gym.js"></script>
    <script src="view-notes.js"></script>
    <script src="notification-service.js?v=3"></script>
    <script src="command-palette.js"></script>

    <div id="commandPalette" class="hidden" onclick="if(event.target === this) closeCommandPalette()">
        <div class="cmd-modal">
            <div class="cmd-header">
                <i data-icon="search" style="width:20px; color:var(--text-muted); margin-right:8px"></i>
                <input id="cmdInput" placeholder="Type a command or search..." autocomplete="off">
                <span
                    style="font-size:10px; background:var(--surface-base); padding:2px 6px; border-radius:4px; color:var(--text-muted)">ESC</span>
            </div>
            <div id="cmdResults">
                <!-- Results -->
            </div>
        </div>
    </div>

    <script>window.addEventListener('load', async function () {
            await initApp();
            if (typeof lucide !== 'undefined' && lucide.createIcons) lucide.createIcons();
        });</script>

    <audio id="alarmSound" src="https://assets.mixkit.co/active_storage/sfx/2869/2869-preview.mp3"
        preload="auto"></audio>
</body>

</html>